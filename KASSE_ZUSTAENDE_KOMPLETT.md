# ğŸ¯ KASSE - KOMPLETTE ZUSTANDSÃœBERSICHT

**Stand:** 11.11.2025 20:44  
**System:** Dynamische Monatsbeitrags-Berechnung

---

## ğŸ“… ZEITLICHE ENTWICKLUNG

### HEUTE (11.11.2025) - Monat 0

| Mitglied | Basis-Saldo | Verstrichene Monate | MonatsbeitrÃ¤ge | Konto-Saldo | Status | Monate gedeckt |
|----------|-------------|---------------------|----------------|-------------|--------|----------------|
| Alaeddin | 40,00â‚¬ | 0 | 0,00â‚¬ | **40,00â‚¬** | ğŸŸ¢ gedeckt | 4 |
| Alessio | 40,00â‚¬ | 0 | 0,00â‚¬ | **40,00â‚¬** | ğŸŸ¢ gedeckt | 4 |
| Ayyub | 40,00â‚¬ | 0 | 0,00â‚¬ | **40,00â‚¬** | ğŸŸ¢ gedeckt | 4 |
| Adis | 0,00â‚¬ | 0 | 0,00â‚¬ | **0,00â‚¬** | ğŸŸ¡ teilweise | 0 |
| Salva | 0,00â‚¬ | 0 | 0,00â‚¬ | **0,00â‚¬** | ğŸŸ¡ teilweise | 0 |
| Elbasan | 0,00â‚¬ | 0 | 0,00â‚¬ | **0,00â‚¬** | ğŸŸ¡ teilweise | 0 |
| Sahin | 0,00â‚¬ | 0 | 0,00â‚¬ | **0,00â‚¬** | ğŸŸ¡ teilweise | 0 |
| Yassin | 0,00â‚¬ | 0 | 0,00â‚¬ | **0,00â‚¬** | ğŸŸ¡ teilweise | 0 |
| Bora | 0,00â‚¬ | 0 | 0,00â‚¬ | **0,00â‚¬** | ğŸŸ¡ teilweise | 0 |

---

### 01.12.2025 - Monat 1

| Mitglied | Basis-Saldo | Verstrichene Monate | MonatsbeitrÃ¤ge | Konto-Saldo | Status | Monate gedeckt |
|----------|-------------|---------------------|----------------|-------------|--------|----------------|
| Alaeddin | 40,00â‚¬ | 1 | 10,00â‚¬ | **30,00â‚¬** | ğŸŸ¢ gedeckt | 3 |
| Alessio | 40,00â‚¬ | 1 | 10,00â‚¬ | **30,00â‚¬** | ğŸŸ¢ gedeckt | 3 |
| Ayyub | 40,00â‚¬ | 1 | 10,00â‚¬ | **30,00â‚¬** | ğŸŸ¢ gedeckt | 3 |
| Adis | 0,00â‚¬ | 1 | 10,00â‚¬ | **-10,00â‚¬** | ğŸ”´ Ã¼berfÃ¤llig | -1 |
| Salva | 0,00â‚¬ | 1 | 10,00â‚¬ | **-10,00â‚¬** | ğŸ”´ Ã¼berfÃ¤llig | -1 |
| Elbasan | 0,00â‚¬ | 1 | 10,00â‚¬ | **-10,00â‚¬** | ğŸ”´ Ã¼berfÃ¤llig | -1 |
| Sahin | 0,00â‚¬ | 1 | 10,00â‚¬ | **-10,00â‚¬** | ğŸ”´ Ã¼berfÃ¤llig | -1 |
| Yassin | 0,00â‚¬ | 1 | 10,00â‚¬ | **-10,00â‚¬** | ğŸ”´ Ã¼berfÃ¤llig | -1 |
| Bora | 0,00â‚¬ | 1 | 10,00â‚¬ | **-10,00â‚¬** | ğŸ”´ Ã¼berfÃ¤llig | -1 |

**Bedeutung:**
- âœ… 3 Mitglieder gedeckt (haben gezahlt)
- ğŸ”´ 6 Mitglieder Ã¼berfÃ¤llig (schulden je 10â‚¬)
- Casino: Nur 3 kÃ¶nnen spielen (Konto â‰¥ 10â‚¬)

---

### 01.01.2026 - Monat 2

| Mitglied | Basis-Saldo | Verstrichene Monate | MonatsbeitrÃ¤ge | Konto-Saldo | Status | Monate gedeckt |
|----------|-------------|---------------------|----------------|-------------|--------|----------------|
| Alaeddin | 40,00â‚¬ | 2 | 20,00â‚¬ | **20,00â‚¬** | ğŸŸ¢ gedeckt | 2 |
| Alessio | 40,00â‚¬ | 2 | 20,00â‚¬ | **20,00â‚¬** | ğŸŸ¢ gedeckt | 2 |
| Ayyub | 40,00â‚¬ | 2 | 20,00â‚¬ | **20,00â‚¬** | ğŸŸ¢ gedeckt | 2 |
| Adis | 0,00â‚¬ | 2 | 20,00â‚¬ | **-20,00â‚¬** | ğŸ”´ Ã¼berfÃ¤llig | -2 |
| Salva | 0,00â‚¬ | 2 | 20,00â‚¬ | **-20,00â‚¬** | ğŸ”´ Ã¼berfÃ¤llig | -2 |
| Elbasan | 0,00â‚¬ | 2 | 20,00â‚¬ | **-20,00â‚¬** | ğŸ”´ Ã¼berfÃ¤llig | -2 |
| Sahin | 0,00â‚¬ | 2 | 20,00â‚¬ | **-20,00â‚¬** | ğŸ”´ Ã¼berfÃ¤llig | -2 |
| Yassin | 0,00â‚¬ | 2 | 20,00â‚¬ | **-20,00â‚¬** | ğŸ”´ Ã¼berfÃ¤llig | -2 |
| Bora | 0,00â‚¬ | 2 | 20,00â‚¬ | **-20,00â‚¬** | ğŸ”´ Ã¼berfÃ¤llig | -2 |

**Bedeutung:**
- Schulden verdoppeln sich jeden Monat
- "-2 Monate" = 2 Monate im RÃ¼ckstand

---

### 01.05.2026 - Monat 6

| Mitglied | Basis-Saldo | Verstrichene Monate | MonatsbeitrÃ¤ge | Konto-Saldo | Status | Monate gedeckt |
|----------|-------------|---------------------|----------------|-------------|--------|----------------|
| Alaeddin | 40,00â‚¬ | 6 | 60,00â‚¬ | **-20,00â‚¬** | ğŸ”´ Ã¼berfÃ¤llig | -2 |
| Alessio | 40,00â‚¬ | 6 | 60,00â‚¬ | **-20,00â‚¬** | ğŸ”´ Ã¼berfÃ¤llig | -2 |
| Ayyub | 40,00â‚¬ | 6 | 60,00â‚¬ | **-20,00â‚¬** | ğŸ”´ Ã¼berfÃ¤llig | -2 |
| Adis | 0,00â‚¬ | 6 | 60,00â‚¬ | **-60,00â‚¬** | ğŸ”´ Ã¼berfÃ¤llig | -6 |
| Salva | 0,00â‚¬ | 6 | 60,00â‚¬ | **-60,00â‚¬** | ğŸ”´ Ã¼berfÃ¤llig | -6 |
| Elbasan | 0,00â‚¬ | 6 | 60,00â‚¬ | **-60,00â‚¬** | ğŸ”´ Ã¼berfÃ¤llig | -6 |
| Sahin | 0,00â‚¬ | 6 | 60,00â‚¬ | **-60,00â‚¬** | ğŸ”´ Ã¼berfÃ¤llig | -6 |
| Yassin | 0,00â‚¬ | 6 | 60,00â‚¬ | **-60,00â‚¬** | ğŸ”´ Ã¼berfÃ¤llig | -6 |
| Bora | 0,00â‚¬ | 6 | 60,00â‚¬ | **-60,00â‚¬** | ğŸ”´ Ã¼berfÃ¤llig | -6 |

**Bedeutung:**
- Auch die "Reichen" sind jetzt Ã¼berfÃ¤llig
- Casino fÃ¼r ALLE gesperrt

---

## ğŸ’¸ EINZAHLUNGS-SZENARIEN

### Szenario 1: Adis zahlt 50â‚¬ ein (am 01.12.2025)

**VORHER (01.12.2025):**
- Basis-Saldo: 0,00â‚¬
- Verstrichene Monate: 1
- MonatsbeitrÃ¤ge: 10,00â‚¬
- Konto-Saldo: **-10,00â‚¬** ğŸ”´

**EINZAHLUNG:**
```sql
INSERT INTO transaktionen (typ, betrag, mitglied_id, beschreibung) 
VALUES ('EINZAHLUNG', 50.00, 7, 'Nachzahlung');
```

**NACHHER:**
- Basis-Saldo: **50,00â‚¬** âœ…
- Verstrichene Monate: 1
- MonatsbeitrÃ¤ge: 10,00â‚¬
- Konto-Saldo: **40,00â‚¬** ğŸŸ¢
- Monate gedeckt: 4

---

### Szenario 2: Alaeddin zahlt 100â‚¬ ein (am 01.01.2026)

**VORHER (01.01.2026):**
- Basis-Saldo: 40,00â‚¬
- Verstrichene Monate: 2
- MonatsbeitrÃ¤ge: 20,00â‚¬
- Konto-Saldo: **20,00â‚¬** ğŸŸ¢

**EINZAHLUNG:**
```sql
INSERT INTO transaktionen (typ, betrag, mitglied_id, beschreibung) 
VALUES ('EINZAHLUNG', 100.00, 4, 'Jahresbeitrag');
```

**NACHHER:**
- Basis-Saldo: **140,00â‚¬** âœ…
- Verstrichene Monate: 2
- MonatsbeitrÃ¤ge: 20,00â‚¬
- Konto-Saldo: **120,00â‚¬** ğŸŸ¢
- Monate gedeckt: 12 (1 Jahr!)

---

### Szenario 3: Teilweise Einzahlung (5â‚¬)

**Mitglied zahlt nur 5â‚¬ statt 10â‚¬:**

**VORHER:**
- Basis-Saldo: 0,00â‚¬
- Konto-Saldo: -10,00â‚¬ ğŸ”´

**EINZAHLUNG:**
```sql
INSERT INTO transaktionen (typ, betrag, mitglied_id, beschreibung) 
VALUES ('EINZAHLUNG', 5.00, 8, 'Teilzahlung');
```

**NACHHER:**
- Basis-Saldo: 5,00â‚¬
- Verstrichene Monate: 1
- MonatsbeitrÃ¤ge: 10,00â‚¬
- Konto-Saldo: **-5,00â‚¬** ğŸ”´
- Status: Immer noch Ã¼berfÃ¤llig!
- Monate gedeckt: 0

**Bedeutung:** Schulden reduziert von -10â‚¬ auf -5â‚¬, aber immer noch im Minus.

---

## ğŸ¬ EVENT-SZENARIEN

### Event 1: Kino - 3 von 9 Teilnehmer

**Event-Details:**
- Gesamtkosten: 60,00â‚¬
- Teilnehmer: Alaeddin, Alessio, Ayyub (3 Personen)
- Kosten pro Teilnehmer: 20,00â‚¬ (60â‚¬ / 3)
- Fair-Share fÃ¼r Nicht-Teilnehmer: 6,67â‚¬ (60â‚¬ / 9)

**Buchung Teilnehmer:**
```sql
INSERT INTO transaktionen (typ, betrag, mitglied_id, beschreibung) 
VALUES ('GRUPPENAKTION_ANTEILIG', -20.00, 4, 'Kino - Anteil');

INSERT INTO transaktionen (typ, betrag, mitglied_id, beschreibung) 
VALUES ('GRUPPENAKTION_ANTEILIG', -20.00, 5, 'Kino - Anteil');

INSERT INTO transaktionen (typ, betrag, mitglied_id, beschreibung) 
VALUES ('GRUPPENAKTION_ANTEILIG', -20.00, 6, 'Kino - Anteil');
```

**Ergebnis Teilnehmer (am 01.12.2025):**

| Mitglied | Basis vorher | Event-Kosten | Basis nachher | MonatsbeitrÃ¤ge | Konto-Saldo | Status |
|----------|--------------|--------------|---------------|----------------|-------------|--------|
| Alaeddin | 40,00â‚¬ | -20,00â‚¬ | 20,00â‚¬ | 10,00â‚¬ | **10,00â‚¬** | ğŸŸ¢ gedeckt |
| Alessio | 40,00â‚¬ | -20,00â‚¬ | 20,00â‚¬ | 10,00â‚¬ | **10,00â‚¬** | ğŸŸ¢ gedeckt |
| Ayyub | 40,00â‚¬ | -20,00â‚¬ | 20,00â‚¬ | 10,00â‚¬ | **10,00â‚¬** | ğŸŸ¢ gedeckt |

**Buchung Nicht-Teilnehmer (Fair-Share):**
```sql
INSERT INTO transaktionen (typ, betrag, mitglied_id, beschreibung) 
VALUES ('AUSGLEICH', 6.67, 7, 'Nicht dabei: Kino');
-- FÃ¼r alle 6 anderen Mitglieder
```

**Ergebnis Nicht-Teilnehmer:**

| Mitglied | Basis vorher | Fair-Share | Basis nachher | MonatsbeitrÃ¤ge | Konto-Saldo | Status |
|----------|--------------|------------|---------------|----------------|-------------|--------|
| Adis | 0,00â‚¬ | +6,67â‚¬ | 6,67â‚¬ | 10,00â‚¬ | **-3,33â‚¬** | ğŸ”´ Ã¼berfÃ¤llig |
| Salva | 0,00â‚¬ | +6,67â‚¬ | 6,67â‚¬ | 10,00â‚¬ | **-3,33â‚¬** | ğŸ”´ Ã¼berfÃ¤llig |
| Alle anderen | 0,00â‚¬ | +6,67â‚¬ | 6,67â‚¬ | 10,00â‚¬ | **-3,33â‚¬** | ğŸ”´ Ã¼berfÃ¤llig |

**Fairness:**
- Teilnehmer haben Event genossen, zahlen Anteil
- Nicht-Teilnehmer bekommen Gutschrift
- Schulden reduziert von -10â‚¬ auf -3,33â‚¬

---

### Event 2: Kasse zahlt komplett (Restaurant)

**Event-Details:**
- Restaurant: 120,00â‚¬
- Kasse zahlt komplett (alle profitieren)

**Buchung:**
```sql
INSERT INTO transaktionen (typ, betrag, beschreibung) 
VALUES ('AUSZAHLUNG', -120.00, 'Restaurant - Kasse zahlt');
```

**Ergebnis:**
- PayPal Pool: -120,00â‚¬
- Alle Mitglieder-Konten: **KEINE Ã„NDERUNG**
- Fair: Alle profitieren gleich (Kasse zahlt fÃ¼r alle)

**PayPal Pool:**
- Vorher: 109,05â‚¬
- Nachher: -10,95â‚¬ (im Minus!)

---

## âš ï¸ SCHADEN-SZENARIEN

### Schaden 1: Equipment kaputt (80â‚¬)

**Verursacher:** Salva  
**Schaden:** 80,00â‚¬

**Buchung:**
```sql
INSERT INTO transaktionen (typ, betrag, mitglied_id, beschreibung) 
VALUES ('SCHADEN', -80.00, 8, 'Equipment Schaden');
```

**VORHER (01.12.2025):**
- Basis-Saldo: 0,00â‚¬
- Verstrichene Monate: 1
- MonatsbeitrÃ¤ge: 10,00â‚¬
- Konto-Saldo: -10,00â‚¬

**NACHHER:**
- Basis-Saldo: **-80,00â‚¬** â—
- Verstrichene Monate: 1
- MonatsbeitrÃ¤ge: 10,00â‚¬
- Konto-Saldo: **-90,00â‚¬** ğŸ”´
- Monate gedeckt: -9 (schuldet 90â‚¬!)

**Tilgung in Raten:**

**Rate 1 (40â‚¬):**
```sql
INSERT INTO transaktionen (typ, betrag, mitglied_id, beschreibung) 
VALUES ('EINZAHLUNG', 40.00, 8, 'Schaden-Tilgung 1/2');
```
- Basis: -80â‚¬ â†’ -40â‚¬
- Konto: -90â‚¬ â†’ -50â‚¬

**Rate 2 (40â‚¬):**
```sql
INSERT INTO transaktionen (typ, betrag, mitglied_id, beschreibung) 
VALUES ('EINZAHLUNG', 40.00, 8, 'Schaden-Tilgung 2/2');
```
- Basis: -40â‚¬ â†’ 0â‚¬
- Konto: -50â‚¬ â†’ -10â‚¬ (nur noch Monatsbeitrag offen)

**Rate 3 (10â‚¬):**
```sql
INSERT INTO transaktionen (typ, betrag, mitglied_id, beschreibung) 
VALUES ('EINZAHLUNG', 10.00, 8, 'Monatsbeitrag');
```
- Basis: 0â‚¬ â†’ 10â‚¬
- Konto: -10â‚¬ â†’ 0â‚¬ ğŸŸ¡ (teilweise gedeckt)

---

### Schaden 2: Mehrere SchÃ¤den gleichzeitig

**Mitglied verursacht 2 SchÃ¤den:**
- Schaden 1: 50â‚¬ (Equipment)
- Schaden 2: 30â‚¬ (Location)

**Buchungen:**
```sql
INSERT INTO transaktionen (typ, betrag, mitglied_id, beschreibung) 
VALUES ('SCHADEN', -50.00, 10, 'Equipment Schaden');

INSERT INTO transaktionen (typ, betrag, mitglied_id, beschreibung) 
VALUES ('SCHADEN', -30.00, 10, 'Location Schaden');
```

**Ergebnis:**
- Basis-Saldo: 0â‚¬ â†’ -80â‚¬
- Konto-Saldo (Monat 1): -90â‚¬
- Schulden: 90â‚¬ total

---

## ğŸ° CASINO-SZENARIEN

### Casino 1: Mitglied mit positivem Saldo

**Mitglied:** Alaeddin  
**Konto-Saldo:** 30,00â‚¬ (nach Monat 1)

**Casino-Check:**
```javascript
if (konto_saldo < 10) {
  return "Mindestens 10â‚¬ Reserve erforderlich";
}
// âœ… ERLAUBT (30â‚¬ â‰¥ 10â‚¬)
```

**Spiel: Mines mit 5â‚¬ Einsatz**

**Gewonnen (+10â‚¬):**
```sql
-- Casino bucht automatisch
INSERT INTO transaktionen (typ, betrag, mitglied_id, beschreibung) 
VALUES ('EINZAHLUNG', 10.00, 4, 'Casino-Gewinn: Mines');
```
- Basis: 40â‚¬ â†’ 50â‚¬
- Konto: 30â‚¬ â†’ 40â‚¬

**Verloren (-5â‚¬):**
```sql
INSERT INTO transaktionen (typ, betrag, mitglied_id, beschreibung) 
VALUES ('AUSZAHLUNG', -5.00, 4, 'Casino-Einsatz: Mines');
```
- Basis: 40â‚¬ â†’ 35â‚¬
- Konto: 30â‚¬ â†’ 25â‚¬

---

### Casino 2: Mitglied mit negativem Saldo

**Mitglied:** Adis  
**Konto-Saldo:** -10,00â‚¬

**Casino-Check:**
```javascript
if (konto_saldo < 10) {
  return "Mindestens 10â‚¬ Reserve erforderlich";
}
// âŒ GESPERRT (-10â‚¬ < 10â‚¬)
```

**Ergebnis:** Casino-Zugang verweigert âœ…

---

### Casino 3: Mitglied mit knapp genug

**Mitglied hat exakt 10â‚¬:**

**Casino-Check:**
```javascript
if (konto_saldo < 10) {
  return "Gesperrt";
}
// âœ… ERLAUBT (10â‚¬ â‰¥ 10â‚¬)
```

**Aber:** Maximaler Einsatz nur 0,01â‚¬!  
Weil: 10â‚¬ - 0,01â‚¬ = 9,99â‚¬ < 10â‚¬ Reserve

**Praktisch:** Kann nicht wirklich spielen.

---

## ğŸ“Š STATUS-ÃœBERSICHT

### Status: ğŸŸ¢ GEDECKT
**Bedingung:** `konto_saldo >= 10â‚¬`

**Rechte:**
- âœ… Casino spielen (mit Reserve-Check)
- âœ… Events teilnehmen
- âœ… Keine Warnungen

**Beispiele:**
- 10,00â‚¬ â†’ gedeckt fÃ¼r 1 Monat
- 40,00â‚¬ â†’ gedeckt fÃ¼r 4 Monate
- 120,00â‚¬ â†’ gedeckt fÃ¼r 12 Monate

---

### Status: ğŸŸ¡ TEILWEISE GEDECKT
**Bedingung:** `0â‚¬ â‰¤ konto_saldo < 10â‚¬`

**Rechte:**
- âŒ Casino gesperrt (< 10â‚¬ Reserve)
- âš ï¸ Warnung: Bald Ã¼berfÃ¤llig
- âš ï¸ Event-Teilnahme nur wenn danach â‰¥ 0â‚¬

**Beispiele:**
- 0,00â‚¬ â†’ kein Geld
- 5,00â‚¬ â†’ halb gedeckt
- 9,99â‚¬ â†’ fast gedeckt

**Bedeutung:** Noch nicht im Minus, aber Casino gesperrt.

---

### Status: ğŸ”´ ÃœBERFÃ„LLIG
**Bedingung:** `konto_saldo < 0â‚¬`

**Rechte:**
- âŒ Casino gesperrt
- âŒ Keine Events (erst zahlen!)
- ğŸ”´ Deutliche Warnung

**Beispiele:**
- -5,00â‚¬ â†’ schuldet 5â‚¬
- -10,00â‚¬ â†’ schuldet 1 Monat
- -60,00â‚¬ â†’ schuldet 6 Monate

**Bedeutung:** Mitglied schuldet der Kasse Geld!

---

### Status: âšª INAKTIV
**Bedingung:** `status = 'inactive'`

**Rechte:**
- âŒ Kein Zugriff auf System
- âŒ Wird nicht in Kasse angezeigt
- âŒ Keine Monatsbeitrags-Berechnung

**Beispiele:**
- Vagif (ausgetreten)

---

## ğŸ”„ MONATLICHER ZYKLUS

### Was passiert jeden Monat AUTOMATISCH:

**01.12.2025 00:00 Uhr:**
- View wird aufgerufen
- `TIMESTAMPDIFF(MONTH, '2025-11-01', '2025-12-01')` = 1
- Verstrichene Monate: 0 â†’ 1
- MonatsbeitrÃ¤ge: 0â‚¬ â†’ 10â‚¬
- **Jeder Konto-Saldo reduziert sich um 10â‚¬**

**KEINE Datenbank-Transaktion!**
Nur Berechnung in der View.

---

## ğŸ’¡ WICHTIGE ERKENNTNISSE

### 1. Negative Salden sind GUT
- Zeigen transparent wer was schuldet
- -10â‚¬ = 1 Monat RÃ¼ckstand
- -60â‚¬ = 6 Monate RÃ¼ckstand

### 2. Casino-Check schÃ¼tzt
- 10â‚¬ Mindest-Reserve
- Automatisch gesperrt bei < 10â‚¬
- Funktioniert perfekt mit negativen Salden

### 3. Fair-Share wichtig
- Events: Nur Teilnehmer zahlen
- Nicht-Teilnehmer: Gutschrift
- Gerecht fÃ¼r alle

### 4. Basis-Saldo vs. Konto-Saldo
- **Basis:** Summe aller Transaktionen (in DB)
- **Konto:** Basis - MonatsbeitrÃ¤ge (berechnet)
- Konto Ã¤ndert sich jeden Monat OHNE DB-Ã„nderung

### 5. Einzahlungen erhÃ¶hen Basis
- Jede EINZAHLUNG â†’ +Betrag in DB
- Basis steigt â†’ Konto steigt
- Sofort wirksam

---

**Erstellt:** 11.11.2025 20:44  
**VollstÃ¤ndige ZustandsÃ¼bersicht**  
**Status:** âœ… Komplett dokumentiert
